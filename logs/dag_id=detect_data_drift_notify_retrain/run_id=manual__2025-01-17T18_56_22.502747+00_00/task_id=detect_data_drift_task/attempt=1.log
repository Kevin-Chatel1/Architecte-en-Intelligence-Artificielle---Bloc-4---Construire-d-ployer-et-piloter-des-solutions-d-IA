[2025-01-17T18:57:03.360+0000] {local_task_job_runner.py:123} INFO - ::group::Pre task execution logs
[2025-01-17T18:57:03.463+0000] {taskinstance.py:2612} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: detect_data_drift_notify_retrain.detect_data_drift_task manual__2025-01-17T18:56:22.502747+00:00 [queued]>
[2025-01-17T18:57:03.553+0000] {taskinstance.py:2612} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: detect_data_drift_notify_retrain.detect_data_drift_task manual__2025-01-17T18:56:22.502747+00:00 [queued]>
[2025-01-17T18:57:03.557+0000] {taskinstance.py:2865} INFO - Starting attempt 1 of 2
[2025-01-17T18:57:03.646+0000] {taskinstance.py:2888} INFO - Executing <Task(BranchPythonOperator): detect_data_drift_task> on 2025-01-17 18:56:22.502747+00:00
[2025-01-17T18:57:03.687+0000] {warnings.py:112} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:70: DeprecationWarning: This process (pid=190) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2025-01-17T18:57:03.703+0000] {standard_task_runner.py:72} INFO - Started process 201 to run task
[2025-01-17T18:57:03.704+0000] {standard_task_runner.py:104} INFO - Running: ['***', 'tasks', 'run', 'detect_data_drift_notify_retrain', 'detect_data_drift_task', 'manual__2025-01-17T18:56:22.502747+00:00', '--job-id', '47', '--raw', '--subdir', 'DAGS_FOLDER/monitoring-dag.py', '--cfg-path', '/tmp/tmpufsrp_n9']
[2025-01-17T18:57:03.709+0000] {standard_task_runner.py:105} INFO - Job 47: Subtask detect_data_drift_task
[2025-01-17T18:57:04.204+0000] {task_command.py:467} INFO - Running <TaskInstance: detect_data_drift_notify_retrain.detect_data_drift_task manual__2025-01-17T18:56:22.502747+00:00 [running]> on host fb760283cf73
[2025-01-17T18:57:04.933+0000] {taskinstance.py:3131} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='RL' AIRFLOW_CTX_DAG_ID='detect_data_drift_notify_retrain' AIRFLOW_CTX_TASK_ID='detect_data_drift_task' AIRFLOW_CTX_EXECUTION_DATE='2025-01-17T18:56:22.502747+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2025-01-17T18:56:22.502747+00:00'
[2025-01-17T18:57:04.943+0000] {taskinstance.py:731} INFO - ::endgroup::
[2025-01-17T18:57:05.056+0000] {baseoperator.py:405} WARNING - BranchPythonOperator.execute cannot be called outside TaskInstance!
[2025-01-17T18:57:05.066+0000] {monitoring-dag.py:83} INFO - Loading files from S3...
[2025-01-17T18:57:05.068+0000] {monitoring-dag.py:58} INFO - Starting to load files from S3...
[2025-01-17T18:57:05.253+0000] {credentials.py:1147} INFO - Found credentials in environment variables.
[2025-01-17T18:57:05.840+0000] {monitoring-dag.py:62} INFO - Loading reference file: covertype-final-project-jedha/covertype/reference/covtype_80.csv
[2025-01-17T19:04:43.650+0000] {monitoring-dag.py:65} INFO - Reference file loaded, shape: (464810, 55)
[2025-01-17T19:04:43.665+0000] {monitoring-dag.py:68} INFO - Loading new data file: covertype-final-project-jedha/covertype/new_data/covtype_sample_drift.csv
[2025-01-17T19:06:44.522+0000] {monitoring-dag.py:71} INFO - New data file loaded, shape: (116202, 55)
[2025-01-17T19:06:44.538+0000] {monitoring-dag.py:85} INFO - Reference data shape: (464810, 55)
[2025-01-17T19:06:44.544+0000] {monitoring-dag.py:86} INFO - New data shape: (116202, 55)
[2025-01-17T19:08:05.506+0000] {monitoring-dag.py:110} INFO - Rapport envoyé à Evidently Cloud.
[2025-01-17T19:08:05.532+0000] {monitoring-dag.py:114} INFO - Résultats détaillés de la dérive : {'metrics': [{'metric': 'DatasetDriftMetric', 'result': {'drift_share': 0.5, 'number_of_columns': 10, 'number_of_drifted_columns': 2, 'share_of_drifted_columns': 0.2, 'dataset_drift': False}}, {'metric': 'DataDriftTable', 'result': {'number_of_columns': 10, 'number_of_drifted_columns': 2, 'share_of_drifted_columns': 0.2, 'dataset_drift': False, 'drift_by_columns': {'Aspect': {'column_name': 'Aspect', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.0022694747474261974, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 36.0, 72.0, 108.0, 144.0, 180.0, 216.0, 252.0, 288.0, 324.0, 360.0], 'y': [0.00411209216135121, 0.004337274745701451, 0.003780772562721238, 0.0028570936816922255, 0.002071345109760972, 0.0017985921068484191, 0.0014799420166797664, 0.0016695065489406378, 0.002444737038375702, 0.0032264218057061556]}}, 'reference': {'small_distribution': {'x': [0.0, 36.0, 72.0, 108.0, 144.0, 180.0, 216.0, 252.0, 288.0, 324.0, 360.0], 'y': [0.004152294007826376, 0.004318192140635719, 0.0037300187173253587, 0.002914093930853467, 0.00208555945201026, 0.0017854368212579096, 0.0014581226737806845, 0.0016760133770309972, 0.002452854093309333, 0.0032051925637476726]}}}, 'Elevation': {'column_name': 'Elevation', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 2.1191769891381607, 'drift_detected': True, 'current': {'small_distribution': {'x': [2245.2, 2482.56, 2719.92, 2957.2799999999997, 3194.64, 3432.0, 3669.36, 3906.7200000000003, 4144.08, 4381.4400000000005, 4618.8], 'y': [2.3312553009409986e-05, 7.816775161475573e-05, 0.00016086749253927264, 0.0003217349850785446, 0.0006755927103846745, 0.0012536570108232948, 0.0011935084487041483, 0.00047194323876126033, 3.0164920845768382e-05, 4.06066242154576e-06]}}, 'reference': {'small_distribution': {'x': [1859.0, 2058.9, 2258.8, 2458.7, 2658.6, 2858.5, 3058.4, 3258.3, 3458.2, 3658.1000000000004, 3858.0], 'y': [2.5937540100271072e-05, 9.19544990110855e-05, 0.0001905924886455193, 0.0003867706965076521, 0.0007985533611451922, 0.001510242869116406, 0.0014199565521449645, 0.0005435690457694165, 2.9822789882925716e-05, 5.101408301879053e-06]}}}, 'Hillshade_3pm': {'column_name': 'Hillshade_3pm', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.003978439389735501, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 25.3, 50.6, 75.9, 101.2, 126.5, 151.8, 177.1, 202.4, 227.70000000000002, 253.0], 'y': [0.00019660461784110032, 0.00042620343625415004, 0.001222486153150371, 0.0032932974220372556, 0.007434579813413375, 0.011036049871720584, 0.008661147723335538, 0.005084508352056689, 0.0018184226418313527, 0.0003523916679643254]}}, 'reference': {'small_distribution': {'x': [0.0, 25.4, 50.8, 76.19999999999999, 101.6, 127.0, 152.39999999999998, 177.79999999999998, 203.2, 228.6, 254.0], 'y': [0.00018735959676691196, 0.0004127501424254801, 0.001272215706798833, 0.0032195866332310526, 0.007476257761405175, 0.011395901839156371, 0.008212228618687136, 0.005159757936821868, 0.0017220650822188453, 0.0003119554226458122]}}}, 'Hillshade_9am': {'column_name': 'Hillshade_9am', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.0028227491466335524, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 25.4, 50.8, 76.19999999999999, 101.6, 127.0, 152.39999999999998, 177.79999999999998, 203.2, 228.6, 254.0], 'y': [3.3880723860310047e-07, 3.3880723860310047e-07, 1.1180638873902318e-05, 7.284355629966658e-05, 0.00031204146675345543, 0.0010526740903398341, 0.0026945339686104573, 0.0078244143683, 0.015505852081909492, 0.011895860954593458]}}, 'reference': {'small_distribution': {'x': [0.0, 25.4, 50.8, 76.19999999999999, 101.6, 127.0, 152.39999999999998, 177.79999999999998, 203.2, 228.6, 254.0], 'y': [1.0164173423159782e-06, 2.5410433557899454e-07, 1.3044022559721722e-05, 6.92857821678725e-05, 0.0003011136376611085, 0.0010381009122853865, 0.0027163753473394506, 0.007830225100866714, 0.015530941692033335, 0.01186972172356599]}}}, 'Hillshade_Noon': {'column_name': 'Hillshade_Noon', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.003526683679625673, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 25.4, 50.8, 76.19999999999999, 101.6, 127.0, 152.39999999999998, 177.79999999999998, 203.2, 228.6, 254.0], 'y': [1.0164217158093015e-06, 3.3880723860310047e-07, 1.0164217158093017e-06, 4.065686863237205e-06, 2.4055313940820127e-05, 0.00016804839034713798, 0.0009290094482497013, 0.0044461673921884865, 0.01642808538538713, 0.017368275472510734]}}, 'reference': {'small_distribution': {'x': [0.0, 25.4, 50.8, 76.19999999999999, 101.6, 127.0, 152.39999999999998, 177.79999999999998, 203.2, 228.6, 254.0], 'y': [1.6940289038599635e-07, 2.5410433557899454e-07, 5.082086711579892e-07, 4.235072259649908e-06, 2.202237575017952e-05, 0.00018193870427456023, 0.000920958813583469, 0.004442167293146788, 0.016354409142199662, 0.01744341562304604]}}}, 'Horizontal_Distance_To_Fire_Points': {'column_name': 'Horizontal_Distance_To_Fire_Points', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.004798947922609449, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 717.2, 1434.4, 2151.6000000000004, 2868.8, 3586.0, 4303.200000000001, 5020.400000000001, 5737.6, 6454.8, 7172.0], 'y': [0.00019725204372987695, 0.0003608228120324308, 0.00033233711632011683, 0.0002527115574545252, 0.00010095983307641495, 4.8908043691403224e-05, 3.700500656140524e-05, 3.033354623451117e-05, 2.7729756862324094e-05, 6.251494299121961e-06]}}, 'reference': {'small_distribution': {'x': [0.0, 717.3, 1434.6, 2151.8999999999996, 2869.2, 3586.5, 4303.799999999999, 5021.099999999999, 5738.4, 6455.7, 7173.0], 'y': [0.00019538210955829095, 0.0003653659245640719, 0.00033210639595132005, 0.0002500028396121123, 9.906774552071395e-05, 4.9347914533827086e-05, 3.664576793133766e-05, 3.1621896488794645e-05, 2.8079692206022526e-05, 6.4965406236108506e-06]}}}, 'Horizontal_Distance_To_Hydrology': {'column_name': 'Horizontal_Distance_To_Hydrology', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.0027717702750612995, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 138.3, 276.6, 414.90000000000003, 553.2, 691.5, 829.8000000000001, 968.1000000000001, 1106.4, 1244.7, 1383.0], 'y': [0.0023679063970222743, 0.0019084377252502538, 0.0013568761994394208, 0.0008461342089322775, 0.0004051463328693971, 0.0001960084393393641, 9.339957696774142e-05, 3.976171198027103e-05, 1.3938377908577015e-05, 3.049020167501222e-06]}}, 'reference': {'small_distribution': {'x': [0.0, 139.7, 279.4, 419.09999999999997, 558.8, 698.5, 838.1999999999999, 977.8999999999999, 1117.6, 1257.3, 1397.0], 'y': [0.002345244415029258, 0.0019846780629740463, 0.0012985501561224738, 0.0008000282502420114, 0.000401900657309395, 0.00018896122409419784, 8.58410646374131e-05, 3.776144429331481e-05, 1.255121415132609e-05, 2.679645720651214e-06]}}}, 'Horizontal_Distance_To_Roadways': {'column_name': 'Horizontal_Distance_To_Roadways', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.002931966660779677, 'drift_detected': False, 'current': {'small_distribution': {'x': [0.0, 708.7, 1417.4, 2126.1000000000004, 2834.8, 3543.5, 4252.200000000001, 4960.900000000001, 5669.6, 6378.3, 7087.0], 'y': [0.00018609060485741478, 0.0003045085871458004, 0.00025583967071718573, 0.00019857355048830702, 0.00015570896091919288, 0.00010327573209215734, 8.207415322879393e-05, 7.299123169970118e-05, 4.709033380992201e-05, 4.881463174726315e-06]}}, 'reference': {'small_distribution': {'x': [0.0, 711.7, 1423.4, 2135.1000000000004, 2846.8, 3558.5, 4270.200000000001, 4981.900000000001, 5693.6, 6405.3, 7117.0], 'y': [0.00018616994432044684, 0.0003065912397763836, 0.00025504732199299216, 0.00019371214564996197, 0.00015423877292017929, 0.00010495600407245004, 8.266494491259281e-05, 7.311854339010441e-05, 4.42677339757189e-05, 4.319761803557929e-06]}}}, 'Slope': {'column_name': 'Slope', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.37355166333329215, 'drift_detected': True, 'current': {'small_distribution': {'x': [0.0, 5.2, 10.4, 15.600000000000001, 20.8, 26.0, 31.200000000000003, 36.4, 41.6, 46.800000000000004, 52.0], 'y': [0.027913924426032653, 0.06287128647328988, 0.06028792037208414, 0.02490523796095129, 0.01220851488058593, 0.0034323518859069005, 0.0006007443271862133, 6.45427789538906e-05, 1.489448745089783e-05, 8.274715250498806e-06]}}, 'reference': {'small_distribution': {'x': [0.0, 6.6, 13.2, 19.799999999999997, 26.4, 33.0, 39.599999999999994, 46.199999999999996, 52.8, 59.4, 66.0], 'y': [0.022320296400027903, 0.057846053747604924, 0.03889631018995707, 0.0217765747229399, 0.007537455838912346, 0.0027352329690919675, 0.00034781236777751474, 4.6288056442743296e-05, 6.5194445694004645e-06, 2.6077778277601858e-06]}}}, 'Vertical_Distance_To_Hydrology': {'column_name': 'Vertical_Distance_To_Hydrology', 'column_type': 'num', 'stattest_name': 'Wasserstein distance (normed)', 'stattest_threshold': 0.1, 'drift_score': 0.00462973735999013, 'drift_detected': False, 'current': {'small_distribution': {'x': [-173.0, -95.9, -18.80000000000001, 58.29999999999998, 135.39999999999998, 212.5, 289.59999999999997, 366.69999999999993, 443.79999999999995, 520.9, 598.0], 'y': [1.5514822783555207e-05, 0.0003403215443673369, 0.008696337213757939, 0.0028772741130538575, 0.0007776386354894179, 0.00019644667697163437, 5.234857471573666e-05, 9.933951278679231e-06, 1.6742614514627917e-06, 2.6788183223404664e-06]}}, 'reference': {'small_distribution': {'x': [-166.0, -89.3, -12.599999999999994, 64.10000000000002, 140.8, 217.5, 294.20000000000005, 370.9, 447.6, 524.3000000000001, 601.0], 'y': [2.1962963263199298e-05, 0.00046941275888842947, 0.009032023206577486, 0.0025517990037117414, 0.0007224496574801549, 0.00018083681246212747, 4.622600697030967e-05, 9.957665336444121e-06, 1.262239267999959e-06, 1.8793340212443862e-06]}}}}, 'current_fi': None, 'reference_fi': None}}]}
[2025-01-17T19:08:05.591+0000] {monitoring-dag.py:128} INFO - Nombre de colonnes dérivées détectées : 2
[2025-01-17T19:08:05.592+0000] {monitoring-dag.py:132} INFO - Dérive détectée dans 2 colonnes.
[2025-01-17T19:08:05.650+0000] {python.py:240} INFO - Done. Returned value was: trigger_jenkins_task
[2025-01-17T19:08:05.652+0000] {branch.py:38} INFO - Branch into trigger_jenkins_task
[2025-01-17T19:08:05.656+0000] {skipmixin.py:230} INFO - Following branch ('trigger_jenkins_task',)
[2025-01-17T19:08:05.703+0000] {skipmixin.py:278} INFO - Skipping tasks [('no_drift_detected_task', -1)]
[2025-01-17T19:08:05.829+0000] {taskinstance.py:340} INFO - ::group::Post task execution logs
[2025-01-17T19:08:05.831+0000] {taskinstance.py:352} INFO - Marking task as SUCCESS. dag_id=detect_data_drift_notify_retrain, task_id=detect_data_drift_task, run_id=manual__2025-01-17T18:56:22.502747+00:00, execution_date=20250117T185622, start_date=20250117T185703, end_date=20250117T190805
[2025-01-17T19:08:05.954+0000] {local_task_job_runner.py:266} INFO - Task exited with return code 0
[2025-01-17T19:08:06.104+0000] {taskinstance.py:3900} INFO - 1 downstream tasks scheduled from follow-on schedule check
[2025-01-17T19:08:06.117+0000] {local_task_job_runner.py:245} INFO - ::endgroup::
